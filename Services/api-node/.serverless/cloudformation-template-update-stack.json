{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "GetCountriesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getCountries"
      }
    },
    "PostTokenLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-postToken"
      }
    },
    "GetStockTermsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getStockTerms"
      }
    },
    "GetStockCategoryLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getStockCategory"
      }
    },
    "UserFlowLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-userFlow"
      }
    },
    "GetCountryLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getCountry"
      }
    },
    "ShowTermAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-showTermAnalysis"
      }
    },
    "ShowCategoryAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-showCategoryAnalysis"
      }
    },
    "ShowSectorAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-showSectorAnalysis"
      }
    },
    "ShowStockAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-showStockAnalysis"
      }
    },
    "GetNewsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getNews"
      }
    },
    "GettermAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-gettermAnalysis"
      }
    },
    "GetcategoryAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getcategoryAnalysis"
      }
    },
    "GetsectorAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getsectorAnalysis"
      }
    },
    "GetstockAnalysisLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/SP-Node-Lambda-Functions-dev-getstockAnalysis"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "SP-Node-Lambda-Functions",
                  "dev",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/SP-Node-Lambda-Functions-dev*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/SP-Node-Lambda-Functions-dev*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:Scan",
                    "dynamodb:GetItem",
                    "dynamodb:Query",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem"
                  ],
                  "Resource": "arn:aws:dynamodb:ap-south-1:332717545786:table/*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "lambda:InvokeFunction"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "aws-marketplace:ViewSubscriptions",
                    "aws-marketplace:Subscribe"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "bedrock:InvokeModel"
                  ],
                  "Resource": "*"
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "SP-Node-Lambda-Functions",
              "dev",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "GetCountriesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/country.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getCountries",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCountriesLogGroup"
      ]
    },
    "PostTokenLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "Common/auth.tokengeneration",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-postToken",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "PostTokenLogGroup"
      ]
    },
    "GetStockTermsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/stockTerm.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getStockTerms",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetStockTermsLogGroup"
      ]
    },
    "GetStockCategoryLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/stockCategory.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getStockCategory",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetStockCategoryLogGroup"
      ]
    },
    "UserFlowLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/userFlow.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-userFlow",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UserFlowLogGroup"
      ]
    },
    "GetCountryLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/country.getCountry",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getCountry",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCountryLogGroup"
      ]
    },
    "ShowTermAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/getAnalysis.showTermAnalysis",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-showTermAnalysis",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ShowTermAnalysisLogGroup"
      ]
    },
    "ShowCategoryAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/getAnalysis.showCategoryAnalysis",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-showCategoryAnalysis",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ShowCategoryAnalysisLogGroup"
      ]
    },
    "ShowSectorAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/getAnalysis.showSectorAnalysis",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-showSectorAnalysis",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ShowSectorAnalysisLogGroup"
      ]
    },
    "ShowStockAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "handlers/getAnalysis.showStockAnalysis",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-showStockAnalysis",
        "MemorySize": 1024,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ShowStockAnalysisLogGroup"
      ]
    },
    "GetNewsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "External/newsAnalysis.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getNews",
        "MemorySize": 1024,
        "Timeout": 300,
        "Description": "Fetches news data for a given country and date range",
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetNewsLogGroup"
      ]
    },
    "GettermAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "External/termAnalysis.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-gettermAnalysis",
        "MemorySize": 1024,
        "Timeout": 300,
        "Description": "Generate the term analysis for a given country",
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GettermAnalysisLogGroup"
      ]
    },
    "GetcategoryAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "External/categoryAnalysis.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getcategoryAnalysis",
        "MemorySize": 1024,
        "Timeout": 300,
        "Description": "Generate the category analysis for a given country and term name",
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetcategoryAnalysisLogGroup"
      ]
    },
    "GetsectorAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "External/sectorAnalysis.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getsectorAnalysis",
        "MemorySize": 1024,
        "Timeout": 300,
        "Description": "Generate the sector analysis for a given country, term name and category name",
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetsectorAnalysisLogGroup"
      ]
    },
    "GetstockAnalysisLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
          "S3Key": "serverless/SP-Node-Lambda-Functions/dev/1772188384195-2026-02-27T10:33:04.195Z/SP-Node-Lambda-Functions.zip"
        },
        "Handler": "External/stockAnalysis.get",
        "Runtime": "nodejs18.x",
        "FunctionName": "SP-Node-Lambda-Functions-dev-getstockAnalysis",
        "MemorySize": 1024,
        "Timeout": 300,
        "Description": "Generate the stock analysis for a given country, term name, category name and top three sectors",
        "Environment": {
          "Variables": {
            "JWT_SECRET": "iamworkinginheliosassoftwareengineer",
            "CountryTable": "Country",
            "TokenHistoryTable": "TokenHistory",
            "CategoryTable": "StockCategory",
            "StockTermTable": "StockTerms",
            "UserCFTable": "UserCF",
            "NewsTable": "NewsRawData",
            "FilteredNews": "FilteredNews",
            "SectorDetailsTable": "SectorDetails"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetstockAnalysisLogGroup"
      ]
    },
    "GetCountriesLambdaVersionyleQhtTT2ok97DgCBYvEcPVfPzxrH5RfbcbF9RYFY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCountriesLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "PostTokenLambdaVersionhEM8jK4wFkyKFhRko27tcVk3DqFxNHQ3NTA3RVdJPic": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "PostTokenLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "GetStockTermsLambdaVersionyT9tXqy5bQdfNABXzBSOseWpqjE6LNAP4c7UDnJI4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetStockTermsLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "GetStockCategoryLambdaVersionM3mPCW2gYOI2TT6LXqe3CemDnMJDE6qwJnqYdlDV7c": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetStockCategoryLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "UserFlowLambdaVersionajQYWp95YU3MI1zpMFW4RWBku2dRUxnk3TqxKYY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UserFlowLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "GetCountryLambdaVersionvcnIs8XvEBz963F9JPZFzDJx2WOVEd6jFoFahWKYA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCountryLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "ShowTermAnalysisLambdaVersionti87Op9hP6p4k0VYiaPaRquELjUPeraI1r7m825ftE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ShowTermAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "ShowCategoryAnalysisLambdaVersionQ61ciRoy7ZtlE0XOHIaRs9ij9nTEG8XH8jyO2DZw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ShowCategoryAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "ShowSectorAnalysisLambdaVersion7a7haXQYKLfKjAJ5IOwPWxA0eaT89xmZAmRdPIRog": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ShowSectorAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "ShowStockAnalysisLambdaVersion6rG8ZRLr175bBb0zOgzOMt6UQxyTNo52T4LpwAyRMP0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ShowStockAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k="
      }
    },
    "GetNewsLambdaVersion0vhFwUtH1hQlu3dB1BMjQSeMRrSfcPciZUgTuurI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetNewsLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k=",
        "Description": "Fetches news data for a given country and date range"
      }
    },
    "GettermAnalysisLambdaVersionDoZG21pXQpwbzvEIqFhx3tAJCVFDHj0AWZrX6g": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GettermAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k=",
        "Description": "Generate the term analysis for a given country"
      }
    },
    "GetcategoryAnalysisLambdaVersion5mEYvoGpH7ADaZfIuhw0Yu9LcRaYtbX66USbMGgaD6c": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetcategoryAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k=",
        "Description": "Generate the category analysis for a given country and term name"
      }
    },
    "GetsectorAnalysisLambdaVersionEq26GoV3NjpJss7GRwGebRKuLxhgdzzVFXcor71es4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetsectorAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k=",
        "Description": "Generate the sector analysis for a given country, term name and category name"
      }
    },
    "GetstockAnalysisLambdaVersionGdDAaL28RFvqEzhKcJ5ALUcObWv065c5HDVzNT1Ng": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetstockAnalysisLambdaFunction"
        },
        "CodeSha256": "pKcRxauyfE2svTGqiPqNTWvyj/lNoF5wWbQ8VDi3a/k=",
        "Description": "Generate the stock analysis for a given country, term name, category name and top three sectors"
      }
    },
    "ApiGatewayRestApi": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Name": "dev-SP-Node-Lambda-Functions",
        "EndpointConfiguration": {
          "Types": [
            "EDGE"
          ]
        },
        "Policy": ""
      }
    },
    "ApiGatewayResourceCountries": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "countries",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceTokengeneration": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "tokengeneration",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceStockterms": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "stockterms",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceStockcategory": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "stockcategory",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceUserflow": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "userflow",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceCountry": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "country",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceShowtermanalysis": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "showtermanalysis",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceShowcategoryanalysis": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "showcategoryanalysis",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceShowsectoranalysis": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "showsectoranalysis",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceShowstockanalysis": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "showstockanalysis",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodCountriesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceCountries"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetCountriesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetCountriesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodTokengenerationPut": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "PUT",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceTokengeneration"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "PostTokenLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "PostTokenLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodStocktermsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceStockterms"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetStockTermsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetStockTermsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodStockcategoryGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceStockcategory"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetStockCategoryLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetStockCategoryLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodUserflowPut": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "PUT",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceUserflow"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UserFlowLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UserFlowLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodCountryGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceCountry"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetCountryLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetCountryLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodShowtermanalysisGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceShowtermanalysis"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ShowTermAnalysisLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ShowTermAnalysisLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodShowcategoryanalysisGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceShowcategoryanalysis"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ShowCategoryAnalysisLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ShowCategoryAnalysisLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodShowsectoranalysisGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceShowsectoranalysis"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ShowSectorAnalysisLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ShowSectorAnalysisLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodShowstockanalysisGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceShowstockanalysis"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ShowStockAnalysisLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ShowStockAnalysisLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayDeployment1772188372755": {
      "Type": "AWS::ApiGateway::Deployment",
      "Properties": {
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "StageName": "dev"
      },
      "DependsOn": [
        "ApiGatewayMethodCountriesGet",
        "ApiGatewayMethodTokengenerationPut",
        "ApiGatewayMethodStocktermsGet",
        "ApiGatewayMethodStockcategoryGet",
        "ApiGatewayMethodUserflowPut",
        "ApiGatewayMethodCountryGet",
        "ApiGatewayMethodShowtermanalysisGet",
        "ApiGatewayMethodShowcategoryanalysisGet",
        "ApiGatewayMethodShowsectoranalysisGet",
        "ApiGatewayMethodShowstockanalysisGet"
      ]
    },
    "GetCountriesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCountriesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "PostTokenLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "PostTokenLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetStockTermsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetStockTermsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetStockCategoryLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetStockCategoryLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UserFlowLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UserFlowLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetCountryLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCountryLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ShowTermAnalysisLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ShowTermAnalysisLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ShowCategoryAnalysisLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ShowCategoryAnalysisLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ShowSectorAnalysisLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ShowSectorAnalysisLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ShowStockAnalysisLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ShowStockAnalysisLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": "serverless-framework-deployments-ap-south-1-c93cf11a-8362",
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-ServerlessDeploymentBucketName"
      }
    },
    "GetCountriesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCountriesLambdaVersionyleQhtTT2ok97DgCBYvEcPVfPzxrH5RfbcbF9RYFY"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetCountriesLambdaFunctionQualifiedArn"
      }
    },
    "PostTokenLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "PostTokenLambdaVersionhEM8jK4wFkyKFhRko27tcVk3DqFxNHQ3NTA3RVdJPic"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-PostTokenLambdaFunctionQualifiedArn"
      }
    },
    "GetStockTermsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetStockTermsLambdaVersionyT9tXqy5bQdfNABXzBSOseWpqjE6LNAP4c7UDnJI4"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetStockTermsLambdaFunctionQualifiedArn"
      }
    },
    "GetStockCategoryLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetStockCategoryLambdaVersionM3mPCW2gYOI2TT6LXqe3CemDnMJDE6qwJnqYdlDV7c"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetStockCategoryLambdaFunctionQualifiedArn"
      }
    },
    "UserFlowLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UserFlowLambdaVersionajQYWp95YU3MI1zpMFW4RWBku2dRUxnk3TqxKYY"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-UserFlowLambdaFunctionQualifiedArn"
      }
    },
    "GetCountryLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCountryLambdaVersionvcnIs8XvEBz963F9JPZFzDJx2WOVEd6jFoFahWKYA"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetCountryLambdaFunctionQualifiedArn"
      }
    },
    "ShowTermAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ShowTermAnalysisLambdaVersionti87Op9hP6p4k0VYiaPaRquELjUPeraI1r7m825ftE"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-ShowTermAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "ShowCategoryAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ShowCategoryAnalysisLambdaVersionQ61ciRoy7ZtlE0XOHIaRs9ij9nTEG8XH8jyO2DZw"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-ShowCategoryAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "ShowSectorAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ShowSectorAnalysisLambdaVersion7a7haXQYKLfKjAJ5IOwPWxA0eaT89xmZAmRdPIRog"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-ShowSectorAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "ShowStockAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ShowStockAnalysisLambdaVersion6rG8ZRLr175bBb0zOgzOMt6UQxyTNo52T4LpwAyRMP0"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-ShowStockAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "GetNewsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetNewsLambdaVersion0vhFwUtH1hQlu3dB1BMjQSeMRrSfcPciZUgTuurI"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetNewsLambdaFunctionQualifiedArn"
      }
    },
    "GettermAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GettermAnalysisLambdaVersionDoZG21pXQpwbzvEIqFhx3tAJCVFDHj0AWZrX6g"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GettermAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "GetcategoryAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetcategoryAnalysisLambdaVersion5mEYvoGpH7ADaZfIuhw0Yu9LcRaYtbX66USbMGgaD6c"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetcategoryAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "GetsectorAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetsectorAnalysisLambdaVersionEq26GoV3NjpJss7GRwGebRKuLxhgdzzVFXcor71es4"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetsectorAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "GetstockAnalysisLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetstockAnalysisLambdaVersionGdDAaL28RFvqEzhKcJ5ALUcObWv065c5HDVzNT1Ng"
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-GetstockAnalysisLambdaFunctionQualifiedArn"
      }
    },
    "ServiceEndpoint": {
      "Description": "URL of the service endpoint",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "ApiGatewayRestApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/dev"
          ]
        ]
      },
      "Export": {
        "Name": "sls-SP-Node-Lambda-Functions-dev-ServiceEndpoint"
      }
    }
  }
}